<!DOCTYPE html>

<html>
<head>
  <title>Rhythm</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="..\..\..\..\..\..\..\docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          <div class="toctop" onclick="">
            <a class="source" href="..\..\..\..\..\..\..\index.html">Home</a>
            <h3>Table of Contents</h3>
              
                    
                    <div class="toc" onclick="">
                        <h3>src\main\antlr</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\antlr\MellowDLexer.html">
                                    MellowDLexer.g4
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\antlr\MellowDParser.html">
                                    MellowDParser.g4
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\main\java\cas\cs4tb3\mellowd</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\ArticulatedSound.html">
                                    ArticulatedSound.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\Articulation.html">
                                    Articulation.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\Beat.html">
                                    Beat.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\Dynamic.html">
                                    Dynamic.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\Pitch.html">
                                    Pitch.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\PlayableSound.html">
                                    PlayableSound.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\TimingEnvironment.html">
                                    TimingEnvironment.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\main\java\cas\cs4tb3\mellowd\compiler</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\compiler\Compiler.html">
                                    Compiler.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\compiler\SequencePlayer.html">
                                    SequencePlayer.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\main\java\cas\cs4tb3\mellowd\midi</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\midi\GeneralMidiConstants.html">
                                    GeneralMidiConstants.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\midi\GeneralMidiInstrument.html">
                                    GeneralMidiInstrument.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\midi\GeneralMidiPercussion.html">
                                    GeneralMidiPercussion.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\midi\MidiNoteMessageSource.html">
                                    MidiNoteMessageSource.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\main\java\cas\cs4tb3\mellowd\parser</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\Block.html">
                                    Block.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\BlockOptions.html">
                                    BlockOptions.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\IncorrectTypeException.html">
                                    IncorrectTypeException.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\ParseException.html">
                                    ParseException.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\SymbolTable.html">
                                    SymbolTable.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\TrackManager.html">
                                    TrackManager.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\UndefinedReferenceException.html">
                                    UndefinedReferenceException.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\main\java\cas\cs4tb3\mellowd\primitives</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="Chord.html">
                                    Chord.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="Melody.html">
                                    Melody.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="Phrase.html">
                                    Phrase.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="Rhythm.html">
                                    Rhythm.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\test\java\cas\cs4tb3\mellowd</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\java\cas\cs4tb3\mellowd\ChordResolutionTest.html">
                                    ChordResolutionTest.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\java\cas\cs4tb3\mellowd\CompilerTest.html">
                                    CompilerTest.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\java\cas\cs4tb3\mellowd\ErrorResponseTest.html">
                                    ErrorResponseTest.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\java\cas\cs4tb3\mellowd\ParserTest.html">
                                    ParserTest.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\java\cas\cs4tb3\mellowd\TestErrorListener.html">
                                    TestErrorListener.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\test\resources\compilertest</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\articulation.html">
                                    articulation.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\percussion.html">
                                    percussion.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\strangeChords.html">
                                    strangeChords.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\strangeMelodies.html">
                                    strangeMelodies.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\strangeRhythms.html">
                                    strangeRhythms.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\varDeclarations.html">
                                    varDeclarations.mlod
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\test\resources\errortest</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\errortest\largeInput.html">
                                    largeInput.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\errortest\largeInputShared.html">
                                    largeInputShared.mlod
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\test\resources\parsertest</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\parsertest\chordNames.html">
                                    chordNames.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\parsertest\simpleBlock.html">
                                    simpleBlock.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\parsertest\varDeclaration.html">
                                    varDeclaration.mlod
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\test\resources\testdata</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\testdata\CompilerTestData.html">
                                    CompilerTestData.json
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\testdata\ParserTestData.html">
                                    ParserTestData.json
                                </a>
                            </li>
                        
                        </div>
                    
          </div>
        
            
            <!-- Moved TOC above header -->
            
          
          <h1 id="rhythm">Rhythm</h1>

          
            <div class='highlight'><pre>
<span class="hljs-keyword">package</span> cas.cs4tb3.mellowd.primitives;

<span class="hljs-keyword">import</span> cas.cs4tb3.mellowd.ArticulatedSound;
<span class="hljs-keyword">import</span> cas.cs4tb3.mellowd.Beat;
<span class="hljs-keyword">import</span> cas.cs4tb3.mellowd.PlayableSound;
<span class="hljs-keyword">import</span> cas.cs4tb3.mellowd.TimingEnvironment;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.Collections;
<span class="hljs-keyword">import</span> java.util.List;</pre></div>
          
        
      </div>

      
        
        <p>The <code>Rhythm</code> is responsible for the timing considerations in playable sounds. It specifies
the duration in the form of a <a href="../Beat.html">Beat</a>. In a Mellow D source file a rhythm is
a comma separated list of beats wrapped in <code>&lt;</code> and <code>&gt;</code>. Each beat is referred to by the first
letter in it’s name. Additionally beats can be slurred together. This results in the durations
overlapping and the notes connecting more smoothly.</p>

        
          <div class='highlight'><pre><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rhythm</span> </span>{</pre></div>
        
      
        
        <p>These two lists are maintained by the rhythm class making sure that both remain the same
length. Each beat has a slurred value associated with it, true marking the beat as slurred
and false being the default, un-slurred, state.</p>

        
          <div class='highlight'><pre>    <span class="hljs-keyword">private</span> List&lt;Beat&gt; beats;
    <span class="hljs-keyword">private</span> List&lt;Boolean&gt; slurred;</pre></div>
        
      
        
        <p>Creating a rhythm is done by specifying zero or more beats that make up the rhythm.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Rhythm</span><span class="hljs-params">(Beat... beats)</span> </span>{</pre></div>
        
      
        
        <p>A copy of the input data is stored in the <code>beats</code> list.</p>

        
          <div class='highlight'><pre>        <span class="hljs-keyword">this</span>.beats = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
        Collections.addAll(<span class="hljs-keyword">this</span>.beats, beats);</pre></div>
        
      
        
        <p>The <code>slurred</code> list is filled in with the default value keeping it the same size as the
<code>beats</code> list.</p>

        
          <div class='highlight'><pre>        <span class="hljs-keyword">this</span>.slurred = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.beats.size(); i++) {
            slurred.add(<span class="hljs-keyword">false</span>);
        }
    }</pre></div>
        
      
        
        <p>This utility method calculates the total duration of this rhythm if performed in the given
<a href="../TimingEnvironment.html">timing environment</a>. The returned duration is in ticks.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">long</span> <span class="hljs-title">getTotalTickDuration</span><span class="hljs-params">(TimingEnvironment environment)</span> </span>{</pre></div>
        
      
        
        <p>To calculate this duration simply sum up the result of calculating
the ticks in each beat in this rhythm.</p>

        
          <div class='highlight'><pre>        <span class="hljs-keyword">long</span> duration = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (Beat beat : beats) {
            duration += environment.ticksInBeat(beat);
        }
        <span class="hljs-keyword">return</span> duration;
    }</pre></div>
        
      
        
        <p>Rhythm also defines some methods for manipulating and retrieving the data
stored in this class.</p>

        
      
        
        <p><code>numBeats</code> returns the number of beats in this Rhythm which is just the size
of the <code>beats</code> list.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">numBeats</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> beats.size();
    }</pre></div>
        
      
        
        <p><code>getBeat</code> returns the beat at a given position in the rhythm. This will throw
an index out of bounds exception if the <code>index</code> is &lt; 0 or &ge; numBeats().</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> Beat <span class="hljs-title">getBeat</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span></span>{
        <span class="hljs-keyword">return</span> beats.get(index);
    }</pre></div>
        
      
        
        <p><code>isSlurred</code> checks if the beat at the given index is slurred. This returns true
if the beat is slurred and false otherwise.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isSlurred</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.slurred.get(index);
    }</pre></div>
        
      
        
        <p><code>slur</code> sets the slur flag to true for all beats in the index range <code>[start, end)</code>.
If <code>end</code> is larger than the number of beats in the rhythm this method will stop at
the largest beat index available.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">slur</span><span class="hljs-params">(<span class="hljs-keyword">int</span> start, <span class="hljs-keyword">int</span> end)</span> </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = start; i &lt; <span class="hljs-keyword">this</span>.beats.size() &amp;&amp; i &lt; end; i++) {
            <span class="hljs-keyword">this</span>.slurred.set(i, <span class="hljs-keyword">true</span>);
        }
    }</pre></div>
        
      
        
        <p><code>append</code> adds a beat to the rhythm. It is equivalent to calling <code>append(beat, false)</code>
as the added beat will not be slurred.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">append</span><span class="hljs-params">(Beat beat)</span> </span>{
        <span class="hljs-keyword">this</span>.beats.add(beat);
        <span class="hljs-keyword">this</span>.slurred.add(<span class="hljs-keyword">false</span>);
    }</pre></div>
        
      
        
        <p><code>appendSlurred</code> adds a beat to the rhythm. It is equivalent to calling <code>append(beat, true)</code>
as the added beat will not be slurred.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">appendSlurred</span><span class="hljs-params">(Beat beat)</span> </span>{
        <span class="hljs-keyword">this</span>.beats.add(beat);
        <span class="hljs-keyword">this</span>.slurred.add(<span class="hljs-keyword">true</span>);
    }</pre></div>
        
      
        
        <p><code>append</code> adds a beat to the rhythm setting the slurred flag to <code>slur</code>.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">append</span><span class="hljs-params">(Beat beat, <span class="hljs-keyword">boolean</span> slur)</span> </span>{
        <span class="hljs-keyword">this</span>.beats.add(beat);
        <span class="hljs-keyword">this</span>.slurred.add(slur);
    }</pre></div>
        
      
        
        <p><code>append</code> preforms a concatenation between this rhythm and the given rhythm. The order
of the elements remain the same with each beat in the new rhythm being added to the end
of this rhythm. All slurred beats will remain slurred.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">append</span><span class="hljs-params">(Rhythm rhythm)</span> </span>{
        <span class="hljs-keyword">this</span>.beats.addAll(rhythm.beats);
        <span class="hljs-keyword">this</span>.slurred.addAll(rhythm.slurred);
    }</pre></div>
        
      
        
        <p><code>append</code> preforms a concatenation between this rhythm and the given rhythm. If the <code>slurred</code>
flag is set to true then all appended beats will have their slurred flag set to true. If the
flag is false then the beats in the given rhythm will retain their slurred state.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">append</span><span class="hljs-params">(Rhythm rhythm, <span class="hljs-keyword">boolean</span> slurred)</span> </span>{
        <span class="hljs-keyword">this</span>.beats.addAll(rhythm.beats);
        <span class="hljs-keyword">if</span> (!slurred) {
            <span class="hljs-keyword">this</span>.slurred.addAll(rhythm.slurred);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; rhythm.slurred.size(); i++) {
                <span class="hljs-keyword">this</span>.slurred.add(<span class="hljs-keyword">true</span>);
            }
        }
    }</pre></div>
        
      
        
        <p><code>createPhrase</code> is the method that preforms the <code>*</code> operation to turn a <a href="Melody.html">Melody</a>
and a rhythm into a <a href="Phrase.html">Phrase</a>.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> Phrase <span class="hljs-title">createPhrase</span><span class="hljs-params">(Melody melody)</span> </span>{</pre></div>
        
      
        
        <p>First we need to take some space to save the created phrase. The length of the phrase is the length
of the longer of the melody or rhythm.</p>

        
          <div class='highlight'><pre>        PlayableSound[] sounds = <span class="hljs-keyword">new</span> PlayableSound[Math.max(<span class="hljs-keyword">this</span>.beats.size(), melody.getNotes().size())];
        List&lt;ArticulatedSound&gt; notes = melody.getNotes();</pre></div>
        
      
        
        <p>Fill in the array by creating a new sound from the sound and beat. Iteration
over the melody and rhythm are modulo so that the shorter collection wraps
around to the front to make the sizes of the collections always match up.</p>

        
          <div class='highlight'><pre>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sounds.length; i++) {
            sounds[i] = <span class="hljs-keyword">new</span> PlayableSound(notes.get(i % notes.size()),
                    <span class="hljs-keyword">this</span>.beats.get(i % <span class="hljs-keyword">this</span>.beats.size()),
                    <span class="hljs-keyword">this</span>.slurred.get(i % <span class="hljs-keyword">this</span>.slurred.size()));
        }</pre></div>
        
      
        
        <p>Create and return a phrase backed by the sounds just created.</p>

        
          <div class='highlight'><pre>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Phrase(sounds);
    }
}</pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
