<!DOCTYPE html>

<html>
<head>
  <title>General MIDI Percussion</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="..\..\..\..\..\..\..\docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          <div class="toctop" onclick="">
            <a class="source" href="..\..\..\..\..\..\..\index.html">Home</a>
            <h3>Table of Contents</h3>
              
                    
                    <div class="toc" onclick="">
                        <h3>src\main\antlr</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\antlr\MellowDLexer.html">
                                    MellowDLexer.g4
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\antlr\MellowDParser.html">
                                    MellowDParser.g4
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\main\java\cas\cs4tb3\mellowd</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\ArticulatedSound.html">
                                    ArticulatedSound.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\Articulation.html">
                                    Articulation.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\Beat.html">
                                    Beat.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\Dynamic.html">
                                    Dynamic.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\Pitch.html">
                                    Pitch.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\PlayableSound.html">
                                    PlayableSound.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\TimingEnvironment.html">
                                    TimingEnvironment.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\main\java\cas\cs4tb3\mellowd\compiler</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\compiler\Compiler.html">
                                    Compiler.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\compiler\SequencePlayer.html">
                                    SequencePlayer.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\main\java\cas\cs4tb3\mellowd\midi</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="GeneralMidiConstants.html">
                                    GeneralMidiConstants.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="GeneralMidiInstrument.html">
                                    GeneralMidiInstrument.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="GeneralMidiPercussion.html">
                                    GeneralMidiPercussion.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="MidiNoteMessageSource.html">
                                    MidiNoteMessageSource.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\main\java\cas\cs4tb3\mellowd\parser</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\Block.html">
                                    Block.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\BlockOptions.html">
                                    BlockOptions.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\IncorrectTypeException.html">
                                    IncorrectTypeException.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\ParseException.html">
                                    ParseException.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\SymbolTable.html">
                                    SymbolTable.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\TrackManager.html">
                                    TrackManager.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\parser\UndefinedReferenceException.html">
                                    UndefinedReferenceException.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\main\java\cas\cs4tb3\mellowd\primitives</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\primitives\Chord.html">
                                    Chord.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\primitives\Melody.html">
                                    Melody.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\primitives\Phrase.html">
                                    Phrase.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\primitives\Rhythm.html">
                                    Rhythm.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\test\java\cas\cs4tb3\mellowd</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\java\cas\cs4tb3\mellowd\ChordResolutionTest.html">
                                    ChordResolutionTest.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\java\cas\cs4tb3\mellowd\CompilerTest.html">
                                    CompilerTest.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\java\cas\cs4tb3\mellowd\ParserTest.html">
                                    ParserTest.java
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\java\cas\cs4tb3\mellowd\TestErrorListener.html">
                                    TestErrorListener.java
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\test\resources\compilertest</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\articulation.html">
                                    articulation.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\percussion.html">
                                    percussion.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\strangeChords.html">
                                    strangeChords.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\strangeMelodies.html">
                                    strangeMelodies.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\strangeRhythms.html">
                                    strangeRhythms.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\compilertest\varDeclarations.html">
                                    varDeclarations.mlod
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\test\resources\parsertest</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\parsertest\chordNames.html">
                                    chordNames.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\parsertest\simpleBlock.html">
                                    simpleBlock.mlod
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\parsertest\varDeclaration.html">
                                    varDeclaration.mlod
                                </a>
                            </li>
                        
                        </div>
                    
                    <div class="toc" onclick="">
                        <h3>src\test\resources\testdata</h3>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\testdata\CompilerTestData.html">
                                    CompilerTestData.json
                                </a>
                            </li>
                        
                            <li class="tocelem">
                                <a class="source" href="..\..\..\..\..\..\test\resources\testdata\ParserTestData.html">
                                    ParserTestData.json
                                </a>
                            </li>
                        
                        </div>
                    
          </div>
        
            
            <!-- Moved TOC above header -->
            
          
          <h1 id="general-midi-percussion">General MIDI Percussion</h1>

          
            <div class='highlight'><pre>
<span class="hljs-keyword">package</span> cas.cs4tb3.mellowd.midi;

<span class="hljs-keyword">import</span> cas.cs4tb3.mellowd.Pitch;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;</pre></div>
          
        
      </div>

      
        
        <p>This class is a mapping of names to the General MIDI standard percussion instrument
id. See <a href="GeneralMidiInstrument.html">General MIDI Instruments</a> for the General MIDI
instrument mapping.</p>

        
          <div class='highlight'><pre><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> GeneralMidiPercussion {
    BASS_DRUM_2(<span class="hljs-number">35</span>, <span class="hljs-string">"bass2"</span>),
    BASS_DRUM_1(<span class="hljs-number">36</span>, <span class="hljs-string">"bass"</span>, <span class="hljs-string">"bass1"</span>),
    RIMSHOT(<span class="hljs-number">37</span>, <span class="hljs-string">"sideStick"</span>, <span class="hljs-string">"rim"</span>),
    SNARE_DRUM_1(<span class="hljs-number">38</span>, <span class="hljs-string">"snare"</span>, <span class="hljs-string">"snare1"</span>),
    HAND_CLAP(<span class="hljs-number">39</span>, <span class="hljs-string">"clap"</span>),
    SNARE_DRUM_2(<span class="hljs-number">40</span>, <span class="hljs-string">"snare2"</span>),
    LOW_TOM_2(<span class="hljs-number">41</span>, <span class="hljs-string">"ltom2"</span>),
    CLOSED_HI_HAT(<span class="hljs-number">42</span>, <span class="hljs-string">"cHat"</span>, <span class="hljs-string">"closedHat"</span>, <span class="hljs-string">"clHat"</span>),
    LOW_TOM_1(<span class="hljs-number">43</span>, <span class="hljs-string">"ltom"</span>, <span class="hljs-string">"ltom1"</span>),
    PEDAL_HI_HAT(<span class="hljs-number">44</span>, <span class="hljs-string">"pHat"</span>, <span class="hljs-string">"pedalHat"</span>),
    MID_TOM_2(<span class="hljs-number">45</span>, <span class="hljs-string">"mtom2"</span>),
    OPEN_HI_HAT(<span class="hljs-number">46</span>, <span class="hljs-string">"oHat"</span>, <span class="hljs-string">"openHat"</span>),
    MID_TOM_1(<span class="hljs-number">47</span>, <span class="hljs-string">"mtom"</span>, <span class="hljs-string">"mtom1"</span>),
    HIGH_TOM_2(<span class="hljs-number">48</span>, <span class="hljs-string">"htom2"</span>),
    CRASH_CYMBAL_1(<span class="hljs-number">49</span>, <span class="hljs-string">"crash"</span>, <span class="hljs-string">"crash1"</span>),
    HIGH_TOM_1(<span class="hljs-number">50</span>, <span class="hljs-string">"htom"</span>, <span class="hljs-string">"htom1"</span>),
    RIDE_CYMBAL_1(<span class="hljs-number">51</span>, <span class="hljs-string">"ride"</span>, <span class="hljs-string">"ride1"</span>),
    CHINESE_CYMBAL(<span class="hljs-number">52</span>, <span class="hljs-string">"trash"</span>),
    RIDE_BELL(<span class="hljs-number">53</span>),
    TAMBOURINE(<span class="hljs-number">54</span>),
    SPLASH_CYMBAL(<span class="hljs-number">55</span>, <span class="hljs-string">"splash"</span>),
    COWBELL(<span class="hljs-number">56</span>),
    CRASH_CYMBAL_2(<span class="hljs-number">57</span>, <span class="hljs-string">"crash2"</span>),
    VIBRA_SLAP(<span class="hljs-number">58</span>, <span class="hljs-string">"vibra"</span>),
    RIDE_CYMBAL_2(<span class="hljs-number">59</span>, <span class="hljs-string">"ride2"</span>),
    HIGH_BONGO(<span class="hljs-number">60</span>, <span class="hljs-string">"hbongo"</span>),
    LOW_BONGO(<span class="hljs-number">61</span>, <span class="hljs-string">"lbongo"</span>),
    MUTE_HIGH_CONGA(<span class="hljs-number">62</span>, <span class="hljs-string">"mhconga"</span>, <span class="hljs-string">"mutehconga"</span>),
    OPEN_HIGH_CONGA(<span class="hljs-number">63</span>, <span class="hljs-string">"hconga"</span>, <span class="hljs-string">"openhconga"</span>),
    LOW_CONGA(<span class="hljs-number">64</span>, <span class="hljs-string">"lconga"</span>),
    HIGH_TIMBALE(<span class="hljs-number">65</span>, <span class="hljs-string">"htim"</span>),
    LOW_TIMBALE(<span class="hljs-number">66</span>, <span class="hljs-string">"ltim"</span>),
    HIGH_AGOGO(<span class="hljs-number">67</span>, <span class="hljs-string">"hAgogo"</span>),
    LOW_AGOGO(<span class="hljs-number">68</span>, <span class="hljs-string">"lAgogo"</span>),
    CABASA(<span class="hljs-number">69</span>),
    MARACAS(<span class="hljs-number">70</span>),
    SHORT_WHISTLE(<span class="hljs-number">71</span>, <span class="hljs-string">"sWhistle"</span>),
    LONG_WHISTLE(<span class="hljs-number">72</span>, <span class="hljs-string">"lWhistle"</span>),
    SHORT_GUIRO(<span class="hljs-number">73</span>, <span class="hljs-string">"sGuiro"</span>),
    LONG_GUIRO(<span class="hljs-number">74</span>, <span class="hljs-string">"lGuiro"</span>),
    CLAVES(<span class="hljs-number">75</span>, <span class="hljs-string">"sticks"</span>),
    HIGH_WOOD_BLOCK(<span class="hljs-number">76</span>, <span class="hljs-string">"hWoodBlock"</span>, <span class="hljs-string">"hBlock"</span>),
    LOW_WOOD_BLOCK(<span class="hljs-number">77</span>, <span class="hljs-string">"lWoodBlock"</span>, <span class="hljs-string">"lBlock"</span>),
    MUTE_CUICA(<span class="hljs-number">78</span>, <span class="hljs-string">"mCucia"</span>),
    OPEN_CUICA(<span class="hljs-number">79</span>, <span class="hljs-string">"oCucia"</span>),
    MUTE_TRIANGLE(<span class="hljs-number">80</span>, <span class="hljs-string">"mTriangle"</span>, <span class="hljs-string">"mTri"</span>),
    OPEN_TRIANGLE(<span class="hljs-number">81</span>, <span class="hljs-string">"oTriangle"</span>, <span class="hljs-string">"oTri"</span>, <span class="hljs-string">"triangle"</span>, <span class="hljs-string">"tri"</span>);</pre></div>
        
      
        
        <p>The only data that the percussion instrument needs is it’s midi number. The other
information passed into the constructor is meta data so the instance can register itself
in the lookup table.</p>

        
          <div class='highlight'><pre>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> midiNum;

    GeneralMidiPercussion(<span class="hljs-keyword">int</span> midiNum, String... lookupKeys) {
        <span class="hljs-keyword">this</span>.midiNum = midiNum;
        registerLookup(<span class="hljs-keyword">this</span>, lookupKeys);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">midiNum</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> midiNum;
    }</pre></div>
        
      
        
        <p>In MIDI the percussion sounds are simply notes that are played on a designated channel.
In GM1 this channel is channel 10 (index 9). When you play the note 35 for example you will
hear the bass2 sound. Therefor to easily build percussion into the compiler’s infrastructure
we can convert the drum name to a pitch and treat it like all other sounds.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> Pitch <span class="hljs-title">getAsPitch</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> Pitch.getPitch(midiNum);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> name() + <span class="hljs-string">":"</span> + midiNum;
    }</pre></div>
        
      
        
        <p>The name lookup is an important service of this class. We will map all of the various
names to its respectful percussion sound.</p>

        
          <div class='highlight'><pre>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, GeneralMidiPercussion&gt; lookupByName;

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerLookup</span><span class="hljs-params">(GeneralMidiPercussion instrument, String... lookupKeys)</span> </span>{
        <span class="hljs-keyword">if</span> (lookupByName == <span class="hljs-keyword">null</span>) lookupByName = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();</pre></div>
        
      
        
        <p>Add the instrument name (excluding underscores <code>_</code>) as a key to the <code>instrument</code></p>

        
          <div class='highlight'><pre>        lookupByName.put(instrument.name().toLowerCase().replace(<span class="hljs-string">"_"</span>, <span class="hljs-string">""</span>), instrument);</pre></div>
        
      
        
        <p>Add all of the specified keys as keys to the <code>instrument</code></p>

        
          <div class='highlight'><pre>        <span class="hljs-keyword">for</span> (String key : lookupKeys) {
            lookupByName.put(key.toLowerCase(), instrument);
        }
    }</pre></div>
        
      
        
        <p>Lookup a <code>GeneralMidiPercussion</code> instrument by name. This lookup is case insensitive
and ignores underscores (<code>_</code>) and spaces.</p>

        
          <div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> GeneralMidiPercussion <span class="hljs-title">lookup</span><span class="hljs-params">(String key)</span> </span>{
        <span class="hljs-keyword">return</span> lookupByName.get(key.toLowerCase().replace(<span class="hljs-string">"_"</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-string">" "</span>, <span class="hljs-string">""</span>));
    }
}</pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
